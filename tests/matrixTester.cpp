/*******************************************************************************
 *    INCLUDED FILES
 ******************************************************************************/
#include <CppUTest/TestHarness.h>
#include <iostream>
#include <fstream>

//-- module being tested
#include "../include/utils.h"
#include "../include/matrix.h"

/*******************************************************************************
 *    DEFINITIONS
 ******************************************************************************/

/*******************************************************************************
 *    PRIVATE TYPES
 ******************************************************************************/

/*******************************************************************************
 *    PRIVATE DATA
 ******************************************************************************/

/*******************************************************************************
 *    PRIVATE FUNCTIONS
 ******************************************************************************/

/*******************************************************************************
 *    SETUP, TEARDOWN
 ******************************************************************************/

/*******************************************************************************
 *    TESTS
 ******************************************************************************/

TEST_GROUP(MatrixTest) {};

TEST(MatrixTest, MatrixConstructor)
{
    Matrix m1(4, 4,
        {1, 2, 3, 4,
        5.5, 6.5, 7.5, 8.5,
        9, 10, 11, 12,
        13.5, 14.5, 15.5, 16.5});
    DOUBLES_EQUAL(m1(0,0), 1, EPSILON);
    DOUBLES_EQUAL(m1(0,3), 4, EPSILON);
    DOUBLES_EQUAL(m1(1,0), 5.5, EPSILON);
    DOUBLES_EQUAL(m1(1,2), 7.5, EPSILON);
    DOUBLES_EQUAL(m1(2,2), 11, EPSILON);
    DOUBLES_EQUAL(m1(3,0), 13.5, EPSILON);
    DOUBLES_EQUAL(m1(3,2), 15.5, EPSILON);

    Matrix m2(4, 4);
    DOUBLES_EQUAL(m2(0,0), 0, EPSILON);
    DOUBLES_EQUAL(m2(0,3), 0, EPSILON);
    DOUBLES_EQUAL(m2(1,0), 0, EPSILON);
    DOUBLES_EQUAL(m2(1,2), 0, EPSILON);
    DOUBLES_EQUAL(m2(2,2), 0, EPSILON);
    DOUBLES_EQUAL(m2(3,0), 0, EPSILON);
    DOUBLES_EQUAL(m2(3,2), 0, EPSILON);

    Matrix m3(3, 4,
        {1, 2, 3, 4,
        5.5, 6.5, 7.5, 8.5,
        9, 10, 11, 12});
    DOUBLES_EQUAL(m3(0,0), 1, EPSILON);
    DOUBLES_EQUAL(m3(0,3), 4, EPSILON);
    DOUBLES_EQUAL(m3(1,0), 5.5, EPSILON);
    DOUBLES_EQUAL(m3(1,2), 7.5, EPSILON);
    DOUBLES_EQUAL(m3(2,2), 11, EPSILON);
}

TEST(MatrixTest, MatrixEqual)
{
    Matrix m1(4, 4,
        {1, 2, 3, 4,
        5.5, 6.5, 7.5, 8.5,
        9, 10, 11, 12,
        13.5, 14.5, 15.5, 16.5});

    Matrix m2(4, 4,
        {1, 2, 3, 4,
        5.5, 6.5, 7.5, 8.5,
        9, 10, 11, 12,
        13.5, 14.5, 15.5, 16.5});

    Matrix m3(4, 4,
        {1, 2, 3, 4,
        5.5, 6.5, 7.5, 8.5,
        9, 10, 11, 12,
        13.5, 14.5, 15.1, 16.5});

    Matrix m4(3, 4,
        {1, 2, 3, 4,
        5.5, 6.5, 7.5, 8.5,
        9, 10, 11, 12});

    CHECK(m1 == m2);
    CHECK_FALSE(m1 == m3);
    CHECK_FALSE(m1 == m4);
}

